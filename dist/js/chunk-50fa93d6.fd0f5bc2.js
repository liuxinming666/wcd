(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50fa93d6"],{"498a":function(e,t,a){"use strict";var i=a("23e7"),n=a("58a8").trim,l=a("e070");i({target:"String",proto:!0,forced:l("trim")},{trim:function(){return n(this)}})},"90fb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Layout",[a("LayoutPanel",{staticStyle:{overflow:"hidden"},attrs:{region:"west",split:!0,bodyStyle:{padding:"0px"},panelStyle:{width:"200px",minWidth:"0px"}}},[a("div",[a("Tree",{attrs:{data:e.treeData},on:{nodeExpand:function(t){return e.onTreeNodeExpand(t)},nodeClick:function(t){return e.onTreeNodeClick(t)}}})],1)]),a("LayoutPanel",{style:{height:e.pageHeight},attrs:{region:"center"}},[a("div",[a("el-table",{attrs:{data:e.tableData,height:e.tableHeight,border:!0}},[e._l(e.tableField,(function(e,t){return a("el-table-column",{attrs:{prop:e.COLUMN_NAME,formatter:e.FORMATTER,label:e.COMMENTS}})})),a("el-table-column",{attrs:{align:"right",width:"150"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",{staticClass:"el-table-add-row",staticStyle:{width:"99.2%",cursor:"pointer"},on:{click:e.handleTableAddData}},[a("span",[e._v("+ 添加数据")])])]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleTableDataEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleTableDataDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],2),a("el-pagination",{staticStyle:{height:"10px"},attrs:{"hide-on-single-page":!1,"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotalNum},on:{"size-change":function(t){return e.handlerPageSizeChange(t)},"current-change":function(t){return e.handlerPageNumChange(t)}}}),e.editDialogShow?a("Dialog",{ref:"d1",attrs:{closed:!0,iconCls:"icon-edit",title:"编辑数据",draggable:!0,dialogStyle:{width:"400px",height:"450px"},modal:!0},on:{close:e.btnEditDataClose}},[a("div",[e._l(e.tableField,(function(t,i){return a("div",[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.COMMENTS+":"))]),a("el-input",{attrs:{size:"medium"},model:{value:e.curEditRow[t.COLUMN_NAME],callback:function(a){e.$set(e.curEditRow,t.COLUMN_NAME,a)},expression:"curEditRow[item.COLUMN_NAME]"}})],1)})),a("el-button",{staticStyle:{float:"right",margin:"5px"},attrs:{type:"primary"},on:{click:e.btnEditDataCancel}},[e._v(" 取消 ")]),a("el-button",{staticStyle:{float:"right",margin:"5px"},attrs:{type:"danger"},on:{click:e.btnEditDataOk}},[e._v(" 确定 ")])],2)]):e._e(),a("Dialog",{ref:"dAdd",attrs:{closed:!0,iconCls:"icon-add",title:"添加数据",draggable:!0,dialogStyle:{width:"400px",height:"450px"},modal:!0}},[a("div",[e._l(e.tableField,(function(t,i){return a("div",[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.COMMENTS+":"))]),a("el-input",{attrs:{size:"medium",readonly:!1},on:{input:e.inputChange},model:{value:e.curAddRow[t.COLUMN_NAME],callback:function(a){e.$set(e.curAddRow,t.COLUMN_NAME,a)},expression:"curAddRow[item.COLUMN_NAME]"}})],1)})),a("el-button",{staticStyle:{float:"right",margin:"5px"},attrs:{type:"primary"},on:{click:e.btnAddDataCancel}},[e._v(" 取消 ")]),a("el-button",{staticStyle:{float:"right",margin:"5px"},attrs:{type:"danger"},on:{click:e.btnAddDataOk}},[e._v(" 确定 ")])],2)])],1)])],1)],1)},n=[],l=(a("a434"),a("0d03"),a("d3b7"),a("25f0"),a("498a"),{name:"dataMaintain",data:function(){return{pageHeight:document.documentElement.clientHeight-75+"px",tableHeight:(document.documentElement.clientHeight-101-10).toString(),treeData:[{id:"RTDB",text:"实时水雨情库",state:"closed"},{id:"JAVADTX",text:"系统管理数据库",state:"closed"}],tableField:[{COLUMN_NAME:"暂无数据",COMMENTS:"暂无数据"}],tableData:null,dataTotalNum:0,pageSize:20,curPageNum:1,curTableName:"",editDialogShow:!0,curEditRow:{"暂无数据":""},curEditRorOri:null,curAddRow:{"暂无数据":""}}},methods:{onTreeNodeExpand:function(e){var t=this,a=e;if(!a.children){var i={params:{owner:a.id}};this.axios.get("api/dbInfo/getAllTablesByOwner",i).then((function(e){for(var i=e.data,n=[],l=0;l<i.length;l++){var r=a.id+"."+i[l].TABLE_NAME,s=void 0;s=i[l].COMMENTS?i[l].COMMENTS:i[l].TABLE_NAME,n.push({id:r,text:s})}t.$set(a,"children",n)}),(function(e){}))}},onTreeNodeClick:function(e){var t=this;this.curTableName=e.id;var a={params:{pageNum:this.curPageNum,pageSize:this.pageSize,tableName:this.curTableName}};this.axios.get("api/dbQuery/getTableDataByName",a).then((function(e){var a=e.data[0],i=e.data[1];t.tableField=new Array,t.curAddRow={};for(var n=0;n<a.length;n++){var l=void 0;l=a[n].COMMENTS?a[n].COMMENTS:a[n].COLUMN_NAME;var r=null;t.curAddRow[a[n].COLUMN_NAME]="",t.tableField.push({COLUMN_NAME:a[n].COLUMN_NAME,COMMENTS:l,FORMATTER:r,DATA_TYPE:a[n].DATA_TYPE,DATA_LENGTH:a[n].DATA_LENGTH,NULLABLE:a[n].NULLABLE})}t.tableData=i.list,t.dataTotalNum=i.total}),(function(e){}))},handlerPageNumChange:function(e){var t=this;this.curPageNum=e,this.curPageNum=1;var a={params:{pageNum:this.curPageNum,pageSize:this.pageSize,tableName:this.curTableName}};this.axios.get("api/dbQuery/getTableDataByName",a).then((function(e){e.data[0];var a=e.data[1];t.tableData=a.list}),(function(e){}))},handlerPageSizeChange:function(e){var t=this;this.pageSize=e;var a={params:{pageNum:this.curPageNum,pageSize:this.pageSize,tableName:this.curTableName}};this.axios.get("api/dbQuery/getTableDataByName",a).then((function(e){e.data[0];var a=e.data[1];t.tableData=a.list}),(function(e){}))},handleTableAddData:function(){this.$refs.dAdd.open()},handleTableDataDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var i="",n="",l="",r=0;r<a.tableField.length;r++)i=i+a.tableField[r].COLUMN_NAME+",",l=l+a.tableField[r].DATA_TYPE+",",n=n+"'"+t[a.tableField[r].COLUMN_NAME]+"',";var s={params:{fields:i,fieldsType:l,tableName:a.curTableName,values:n}};a.axios.get("api/dbOper/delData",s).then((function(t){a.tableData.splice(e,1),a.$message({type:"success",message:"删除成功!"})}),(function(e){a.$message({type:"info",message:"已取消删除"})}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleTableDataEdit:function(e,t){this.curEditRow=t,this.curEditRorOri=_.cloneDeep(t),this.$refs.d1.open()},sleep:function(e){var t=(new Date).getTime();while((new Date).getTime()-t<e);},btnEditDataOk:function(){for(var e=this,t="",a="",i="",n="",l=(this.curTableName,0);l<this.tableField.length;l++)t=t+this.tableField[l].COLUMN_NAME+",",i=i+this.tableField[l].DATA_TYPE+",",a=a+"'"+this.curEditRow[this.tableField[l].COLUMN_NAME]+"',",n=n+"'"+this.curEditRorOri[this.tableField[l].COLUMN_NAME]+"',";var r={params:{fields:t,fieldsType:i,tableName:this.curTableName,values:a,oriValues:n}};this.axios.get("api/dbOper/updateData",r).then((function(t){e.$message({type:"success",message:"修改成功!"}),e.$refs.d1.close()}),(function(t){e.$message({type:"info",message:"已取消修改"}),e.handlerPageNumChange(e.curPageNum),e.$refs.d1.close()}))},btnEditDataCancel:function(){this.$message({type:"info",message:"已取消修改"}),this.handlerPageNumChange(this.curPageNum),this.$refs.d1.close()},btnEditDataClose:function(){this.handlerPageNumChange(this.curPageNum),this.$refs.d1.close()},btnAddDataOk:function(){for(var e=this,t="",a="",i="",n=0;n<this.tableField.length;n++)""!=_.trim(this.curAddRow[this.tableField[n].COLUMN_NAME])&&(t=t+this.tableField[n].COLUMN_NAME+",",i=i+this.tableField[n].DATA_TYPE+",",a=a+"'"+this.curAddRow[this.tableField[n].COLUMN_NAME]+"',");var l={params:{fields:t,fieldsType:i,tableName:this.curTableName,values:a}};this.axios.get("api/dbOper/insertIntoData",l).then((function(t){e.$message({type:"success",message:"添加成功!"}),e.handlerPageNumChange(e.curPageNum),e.$refs.dAdd.close()}),(function(t){e.$refs.dAdd.close()}))},btnAddDataCancel:function(){this.$refs.dAdd.close()},inputChange:function(e){this.$forceUpdate()},btnTest:function(){alert(this.txtTest.first)}}}),r=l,s=a("2877"),d=Object(s["a"])(r,i,n,!1,null,"21e67768",null);t["default"]=d.exports},e070:function(e,t,a){var i=a("d039"),n=a("5899"),l="​᠎";e.exports=function(e){return i((function(){return!!n[e]()||l[e]()!=l||n[e].name!==e}))}}}]);
//# sourceMappingURL=chunk-50fa93d6.fd0f5bc2.js.map